<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–õ–∏–¥–µ—Ä–±–æ—Ä–¥ Brenk-Coin</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      padding: 10px;
      background: linear-gradient(135deg, #0a0a15, #0f1e3a);
      color: #e0f0ff;
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
    }

    .loader-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #0a0a15;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.8s ease;
    }
    .loader-overlay.hidden { opacity: 0; pointer-events: none; }

    .loader {
      width: 80px;
      height: 80px;
      border: 6px solid rgba(13, 110, 253, 0.3);
      border-top: 6px solid #0d6efd;
      border-radius: 50%;
      animation: spin 1.2s linear infinite;
      box-shadow: 0 0 30px rgba(13, 110, 253, 0.6);
    }

    .loader-text {
      margin-top: 30px;
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5em;
      color: #0d6efd;
      text-shadow: 0 0 20px #0d6efd;
      animation: pulse 2s ease infinite;
    }

    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @keyframes pulse { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }

    h1 {
      text-align: center;
      font-size: 2.4em;
      margin: 20px 0;
      color: #8a2be2;
      text-shadow: 0 0 20px #8a2be2;
    }

    .leaderboard {
      max-width: 600px;
      margin: 0 auto;
      background: rgba(0,0,0,0.4);
      border-radius: 20px;
      padding: 20px;
      border: 2px solid #0d6efd;
      box-shadow: 0 0 30px rgba(13,110,253,0.4);
    }

    .rank-item {
      display: flex;
      align-items: center;
      padding: 15px;
      margin: 10px 0;
      background: rgba(13,110,253,0.15);
      border-radius: 15px;
      border-left: 5px solid #0d6efd;
      transition: all 0.3s;
    }

    .rank-item:hover {
      background: rgba(13,110,253,0.3);
      transform: translateX(10px);
      box-shadow: 0 0 20px rgba(13,110,253,0.5);
    }

    .rank-position {
      font-size: 2.2em;
      font-weight: bold;
      width: 70px;
      text-align: center;
      color: #ffd700;
      text-shadow: 0 0 15px #ffd700;
    }

    .rank-position.top1 { color: #ffeb3b; text-shadow: 0 0 20px #ffeb3b; }
    .rank-position.top2 { color: #c0c0c0; text-shadow: 0 0 15px #c0c0c0; }
    .rank-position.top3 { color: #cd7f32; text-shadow: 0 0 15px #cd7f32; }

    .rank-info {
      flex: 1;
      margin-left: 15px;
    }

    .rank-nickname {
      font-size: 1.5em;
      color: #90e6ff;
      margin-bottom: 5px;
    }

    .rank-balance {
      font-size: 1.7em;
      color: #8a2be2;
      font-weight: bold;
      text-shadow: 0 0 15px #8a2be2;
    }

    .back-btn {
      text-align: center;
      margin: 40px 0;
    }

    .back-btn button {
      padding: 14px 40px;
      background: rgba(13, 110, 253, 0.4);
      border: 2px solid #0d6efd;
      color: white;
      border-radius: 50px;
      font-size: 1.1em;
      cursor: pointer;
    }

    .no-data {
      text-align: center;
      font-size: 1.4em;
      opacity: 0.8;
      margin: 50px 0;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="loader-overlay" id="loader">
    <div class="loader"></div>
    <div class="loader-text">–ó–∞–≥—Ä—É–∂–∞–µ–º –ª–∏–¥–µ—Ä–±–æ—Ä–¥...</div>
  </div>

  <h1>üèÜ –¢–æ–ø-10 Brenk-Coin</h1>

  <div class="leaderboard" id="leaderboard">
    <div class="no-data">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∞ –∏–≥—Ä–æ–∫–æ–≤...</div>
  </div>

  <div class="back-btn">
    <button onclick="window.location.href='farm.html'">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Ñ–∞—Ä–º</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const API_URL = 'https://10311.dscrd.ru/api/leaderboard';

    async function loadLeaderboard() {
      try {
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error('–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª');

        const players = await res.json();

        const container = document.getElementById('leaderboard');
        container.innerHTML = '';

        if (players.length === 0) {
          container.innerHTML = '<div class="no-data">–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ —Ñ–∞—Ä–º–∏—Ç...<br>–ë—É–¥—å –ø–µ—Ä–≤—ã–º –≤ —Ç–æ–ø–µ! ‚ô°</div>';
          return;
        }

        players.forEach((player, index) => {
          const item = document.createElement('div');
          item.className = 'rank-item';

          const position = document.createElement('div');
          position.className = `rank-position ${index === 0 ? 'top1' : index === 1 ? 'top2' : index === 2 ? 'top3' : ''}`;
          position.textContent = `#${index + 1}`;

          const info = document.createElement('div');
          info.className = 'rank-info';

          const nickname = document.createElement('div');
          nickname.className = 'rank-nickname';
          nickname.textContent = player.nickname || '–ê–Ω–æ–Ω–∏–º';

          const balance = document.createElement('div');
          balance.className = 'rank-balance';
          balance.textContent = `${player.balance.toLocaleString()} BC`;

          info.appendChild(nickname);
          info.appendChild(balance);

          item.appendChild(position);
          item.appendChild(info);

          container.appendChild(item);
        });
      } catch (e) {
        document.getElementById('leaderboard').innerHTML = 
          '<div class="no-data">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª–∏–¥–µ—Ä–±–æ—Ä–¥...<br>–ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚ô°</div>';
      } finally {
        document.getElementById('loader').classList.add('hidden');
      }
    }


    loadLeaderboard();

    
    setInterval(loadLeaderboard, 30000);
  </script>
</body>
</html>